---
// src/components/Navbar.astro
// ARQUITECTURA "CENTRO DE COMANDO FLOTANTE":
// Un panel de vidrio minimalista y centrado que aparece al hacer scroll.
import Links from '@/components/Links.astro';
import ThemeToggle from '@/components/ThemeToggle.astro';
---

<nav
  id="main-navbar"
  class="shadow-inset-light dark:shadow-inset-dark <!-- REFINAMIENTO: Padding horizontal aumentado de a --> fixed left-1/2 top-4 z-50 flex w-auto -translate-x-1/2 -translate-y-full items-center gap-x-6 rounded-small border border-border bg-panel/75 px-6 py-2 opacity-0 shadow-lg backdrop-blur-xl"
  aria-label="Navegación principal"
>
  <Links />
  <ThemeToggle />
</nav>

<!-- El motor de animación de GSAP no necesita ningún cambio. -->
<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener('DOMContentLoaded', () => {
    const navbar = document.getElementById('main-navbar');
    if (!navbar) return;

    gsap.to(navbar, {
      y: 0,
      autoAlpha: 1,
      duration: 0.5,
      ease: 'power3.out',
      scrollTrigger: {
        trigger: 'body',
        start: 'top top-=-100px',
        toggleActions: 'play none none reverse',
      },
    });
  });
</script>
