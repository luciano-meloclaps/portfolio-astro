---
// src/components/ui/TerminalHeader.astro
// ARQUITECTURA: Una "isla de script" Astro-nativa que simula una terminal real.
---

<div
  class="rounded-large bg-[#1E1E1E] p-4 font-mono text-sm text-[#E0E0E0] shadow-lg"
>
  <!-- Barra de Título Minimalista -->
  <div class="mb-4 flex items-center gap-x-2">
    <div class="h-3 w-3 rounded-full bg-[#FF5F56]"></div>
    <div class="h-3 w-3 rounded-full bg-[#FFBD2E]"></div>
    <div class="h-3 w-3 rounded-full bg-[#27C93F]"></div>
  </div>

  <!-- Cuerpo de la Terminal con Animación -->
  <div class="terminal-body">
    <span id="terminal-output"></span>
    <span id="terminal-cursor" class="inline-block h-4 w-2 bg-[#E0E0E0]"></span>
  </div>
</div>

<script>
  import gsap from 'gsap';
  import { TextPlugin } from 'gsap/TextPlugin';

  gsap.registerPlugin(TextPlugin);

  document.addEventListener('DOMContentLoaded', () => {
    const output = document.getElementById('terminal-output');
    const cursor = document.getElementById('terminal-cursor');

    if (!output || !cursor) return;

    // Animación del cursor
    gsap.to(cursor, {
      opacity: 0,
      ease: 'power2.inOut',
      duration: 0.7,
      repeat: -1,
      yoyo: true,
    });

    // Secuencia de comandos
    const tl = gsap.timeline({ repeat: -1, repeatDelay: 5 });

    tl.to(output, {
      duration: 1.5,
      text: '$ ssh profile@luciano.dev --fetch-all',
    })
      .to(output, { duration: 1, text: '> Fetching skills... OK', delay: 0.5 })
      .to(output, {
        duration: 1,
        text: '> Analyzing architecture patterns... OK',
        delay: 0.5,
      })
      .to(output, {
        duration: 1,
        text: '> Compiling design principles... OK',
        delay: 0.5,
      })
      .to(output, {
        duration: 1,
        text: '> STATUS: All systems operational.',
        delay: 1,
      });
  });
</script>
