---
// src/components/ui/StatusChip.astro
import type { ElementType } from 'react';

// Definimos los estados posibles
type Variant = 'positive' | 'warning' | 'neutral' | 'active';

interface Props {
  // Aceptamos cualquier componente (Astro o React) o función que renderice un SVG
  Icon: ElementType | any;
  label: string;
  value: string;
  variant?: Variant;
  class?: string;
}

const {
  Icon,
  label,
  value,
  variant = 'positive',
  class: className,
} = Astro.props;

// Configuración de colores semánticos (Texto y Luces)
const variantConfig: Record<
  Variant,
  { text: string; dot: string; glow: string }
> = {
  positive: {
    text: 'text-emerald-600 dark:text-emerald-400',
    dot: 'bg-emerald-500',
    glow: 'shadow-emerald-500/20',
  },
  warning: {
    text: 'text-amber-600 dark:text-amber-400',
    dot: 'bg-amber-500',
    glow: 'shadow-amber-500/20',
  },
  neutral: {
    text: 'text-slate-600 dark:text-slate-400',
    dot: 'bg-slate-500',
    glow: 'shadow-slate-500/20',
  },
  active: {
    text: 'text-cyan-600 dark:text-cyan-400',
    dot: 'bg-cyan-500',
    glow: 'shadow-cyan-500/20',
  },
};

const theme = variantConfig[variant];
---

<div
  class:list={[
    // BASE: Flex, forma y transición
    'inline-flex select-none items-center justify-between gap-x-3 rounded-small px-3 py-1.5 transition-all duration-300',

    // ESTÉTICA GLASS CONSISTENTE CON NAVBAR:

    'bg-panel/20 dark:bg-panel/10 border border-border',
    'backdrop-blur-[var(--blur-base)]',

    // Sombra sutil para levantar del fondo
    'shadow-sm',

    className,
  ]}
>
  <!-- Contenido: Icono y Texto -->
  <div class="flex items-center gap-x-2.5">
    <!-- Icono con el color de la variante -->
    <Icon class:list={['h-4 w-4', theme.text]} strokeWidth={1.5} />

    <div class="flex gap-1.5 font-sans text-xs uppercase tracking-wider">
      <span class="text-text-secondary/80 font-bold">{label}</span>
      <!-- Separador vertical sutil -->
      <span class="bg-border/50 h-3 w-[1px] self-center"></span>
      <span class="font-medium text-text-primary">{value}</span>
    </div>
  </div>

  <!-- Indicador de Estado (LED) -->
  <div class="relative ml-1 flex h-1.5 w-1.5 items-center justify-center">
    <!-- Punto sólido -->
    <span class:list={['absolute h-1.5 w-1.5 rounded-full', theme.dot]}></span>
    <!-- Ping (Onda expansiva) -->
    <span
      class:list={[
        'absolute h-full w-full animate-ping rounded-full opacity-75',
        theme.dot,
      ]}></span>
    <!-- Glow estático para ambiente -->
    <span
      class:list={[
        'absolute h-2 w-2 rounded-full opacity-50 blur-[2px]',
        theme.dot,
      ]}></span>
  </div>
</div>
