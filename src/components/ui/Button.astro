---
// src/components/Button.astro

interface Props {
  href?: string;
  variant?: 'primary' | 'secondary';
  className?: string;
  target?: '_blank' | '_self' | '_parent' | '_top';
}

const { href, variant = 'primary', className, target } = Astro.props;

const Tag = href ? 'a' : 'button';

// --- LÓGICA DE ESTILOS "FUSIÓN GLACIAL" ---
const baseClasses = `
  relative inline-flex items-center justify-center gap-x-2 px-6 py-3
  font-sans text-xs uppercase tracking-wider overflow-hidden
  border
  transition-all duration-300 ease-in-out
  z-10
  focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-[--color-background]
`;

const variantClasses = {
  // 1. VARIANTE PRIMARIA (FUSIÓN GLACIAL)
  primary: `
    bg-[--color-text-primary] text-[--color-background] border-transparent
    hover:bg-transparent hover:text-[--color-text-hover] hover:border-[--color-text-hover]
    hover:backdrop-blur-[var(--glass-blur)]
    focus-visible:ring-[--color-text-primary]
  `,
  // 2. VARIANTE SECUNDARIA (OUTLINE CON ANIMACIÓN DE LLENADO) - Sin cambios
  secondary: `
    border-[--color-text-primary] text-[--color-text-primary]
    before:content-[''] before:absolute before:inset-0 before:bg-[--color-accent-fill]
    before:translate-x-[-100%] before:transition-transform before:duration-300 before:ease-in-out
    hover:text-[--color-background] hover:before:translate-x-0
    focus-visible:ring-[--color-text-primary]
  `,
};
---

<Tag
  href={href}
  target={target}
  class:list={[baseClasses, variantClasses[variant], className]}
  style=`border-radius: var(--radius-small);`
>
  <span class="relative z-10 flex items-center gap-x-2">
    <slot />
  </span>
</Tag>
