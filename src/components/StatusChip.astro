---
// src/components/StatusChip.astro
import type { Icon as TablerIcon } from '@tabler/icons-react';

type Variant = 'positive' | 'warning' | 'neutral' | 'active';

interface Props {
  Icon: TablerIcon;
  label: string;
  value: string;
  variant?: Variant;
  class?: string;
}

const {
  Icon,
  label,
  value,
  variant = 'positive',
  class: className,
} = Astro.props;

const variantColorMap: Record<Variant, string> = {
  positive: 'var(--color-led-positive)',
  warning: 'var(--color-led-warning)',
  neutral: 'var(--color-led-neutral)',
  active: 'var(--color-led-active)',
};

const accentColor = variantColorMap[variant];
---

<!-- 
  ARQUITECTURA "MONOCROMÁTICA CON ACENTO"
  - El borde ahora es el neutro `--color-border`.
  - El padding (`px-4`) ha sido aumentado para mayor espaciado.
-->
<div
  class:list={[
    'inline-flex items-center justify-between gap-x-4 rounded-[var(--radius-small)] border border-border-color bg-panel bg-clip-padding px-4 py-2 backdrop-blur-[var(--blur-base)]',
    className,
  ]}
  style=`box-shadow: var(--shadow-inset);`
>
  <!-- Contenido Principal (Izquierda) - Ahora completamente monocromático -->
  <div class="flex items-center gap-x-3">
    {
      /* El icono ahora usa el color de texto secundario, es parte de la información base. */
    }
    <Icon className="icon-base text-text-secondary" strokeWidth={1.0} />

    <div class="font-sans text-sm uppercase tracking-wider">
      <span class="font-bold text-text-secondary">{label}:</span>
      <span class="ml-1 font-normal text-text-primary">{value}</span>
    </div>
  </div>

  <!-- La Luz LED (Derecha) - El único portador del color de acento. -->
  <div class="led-container flex h-2 w-2 items-center justify-center">
    <span
      class="absolute h-1.5 w-1.5 rounded-full"
      style=`background-color: ${accentColor};`></span>
    <span
      class="h-full w-full animate-ping rounded-full opacity-80"
      style=`background-color: ${accentColor};`></span>
  </div>
</div>

<!-- La animación de @keyframes no cambia -->
<style is:global>
  @keyframes ping {
    75%,
    100% {
      transform: scale(2.5);
      opacity: 0;
    }
  }
  .animate-ping {
    animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
  }
</style>
