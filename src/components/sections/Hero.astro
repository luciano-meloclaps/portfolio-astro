---
// src/components/sections/Hero.astro
import AnimatedProfession from '@/components/ui/AnimatedProfession.astro';
import StatusChip from '@/components/ui/StatusChip.astro';
import Button from '@/components/ui/Button.astro';
import AnimatedArrowIcon from '@/components/ui/AnimatedArrowIcon.astro';
import {
  IconCode,
  IconFocus2,
  IconUsersGroup,
  IconBrandGithub,
} from '@tabler/icons-react';
---

<section
  class="selection:bg-accent-magenta/20 hero-section relative flex min-h-screen w-full flex-col items-center justify-center overflow-hidden text-gray-900 transition-colors duration-500 selection:text-black dark:text-white"
>
  <!-- ... (Tus capas de atmósfera Light/Dark se mantienen igual, no las toco) ... -->

  <!-- CONTENIDO PRINCIPAL -->
  <div
    class="relative z-10 flex w-full max-w-5xl flex-col items-center gap-y-10 px-4 text-center"
  >
    <!-- Título -->
    <div class="hero-title drop-shadow-xl dark:drop-shadow-2xl">
      <AnimatedProfession />
    </div>

    <!-- Subtítulo -->
    <p
      class="hero-subtitle max-w-xl text-base font-light leading-relaxed tracking-wide text-gray-600 dark:text-gray-300 md:text-lg"
    >
      Técnico en Programación. Desarrollo soluciones digitales completas uniendo
      lógica de backend y diseño de frontend.
    </p>

    <!-- Chips -->
    <div class="hero-chips flex flex-wrap justify-center gap-4">
      <StatusChip
        Icon={IconCode}
        label="Mode"
        value="Full-Stack"
        variant="active"
      />
      <StatusChip
        Icon={IconUsersGroup}
        label="Core"
        value=".Net & React"
        variant="warning"
      />
      <StatusChip
        Icon={IconFocus2}
        label="Focus"
        value="SEO & UX/UI"
        variant="positive"
      />
    </div>

    <!-- 
      BOTONES SIMÉTRICOS
    -->
    <div
      class="hero-buttons flex w-full max-w-xs flex-col gap-4 pt-6 sm:max-w-none sm:flex-row sm:justify-center"
    >
      <Button
        href="#projects"
        variant="primary"
        class="w-full justify-center md:w-48"
      >
        <span>Proyectos</span>
        <AnimatedArrowIcon />
      </Button>

      <Button
        href="https://github.com/luciano-meloclaps"
        variant="secondary"
        target="_blank"
        class="w-full justify-center md:w-48"
      >
        <IconBrandGithub strokeWidth={1.0} className="icon-base" />
        <span>GitHub</span>
      </Button>
    </div>
  </div>
</section>

<script>
  import gsap from 'gsap';

  document.addEventListener('astro:page-load', () => {
    // Respeta prefers-reduced-motion del usuario
    const prefersReducedMotion = window.matchMedia(
      '(prefers-reduced-motion: reduce)'
    ).matches;

    const elementsToAnimate = [
      '.hero-title',
      '.hero-subtitle',
      '.hero-chips',
      '.hero-buttons',
    ];

    if (prefersReducedMotion) {
      // Degradación elegante: mostrar elementos sin animación
      gsap.set(elementsToAnimate, { autoAlpha: 1, y: 0 });
    } else {
      // Animaciones composited (transform + opacity)
      gsap.set(elementsToAnimate, { autoAlpha: 0, y: 30 });

      const tl = gsap.timeline({
        defaults: { duration: 1.4, ease: 'power4.out' },
      });

      tl.to('.hero-title', { autoAlpha: 1, y: 0 }, 0.2)
        .to('.hero-subtitle', { autoAlpha: 1, y: 0 }, '-=1.2')
        .to('.hero-chips', { autoAlpha: 1, y: 0 }, '-=1.2')
        .to('.hero-buttons', { autoAlpha: 1, y: 0 }, '-=1.1');
    }
  });
</script>
